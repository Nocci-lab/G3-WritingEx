<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>Day 1 Writing | Word Order</title>

<style>
body{
  font-family:"Hiragino Maru Gothic ProN","Hiragino Maru Gothic",sans-serif;
  background:#fff9e6;
  padding:20px;
  text-align:center;
  font-size:20px;
}

h1{
  font-size:32px;
  margin-bottom:20px;
}

.frame{
  max-width:900px;
  margin:auto;
  background:#ffffff;
  border:3px solid #f2c94c;
  border-radius:16px;
  padding:24px;
}

#jp{
  font-size:26px;
  font-weight:bold;
  margin-bottom:20px;
}

.row{
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  gap:10px;
  margin:16px 0;
}

#answerRow{
  min-height:80px;
  border:3px dashed #bbb;
  border-radius:12px;
  padding:12px;
}

.card{
  background:#e6f5e6;
  padding:14px 18px;
  border-radius:12px;
  font-size:24px;
  font-weight:bold;
  cursor:pointer;
  user-select:none;
  box-shadow:2px 2px 6px rgba(0,0,0,.2);
}

button{
  padding:12px 24px;
  font-size:20px;
  border-radius:12px;
  margin:6px;
}

#message{
  font-size:24px;
  font-weight:bold;
  height:32px;
  margin-top:10px;
}

#nextBtn,
#speakBtn{
  display:none;
}

canvas{
  position:fixed;
  inset:0;
  pointer-events:none;
}
</style>
</head>

<body>

<h1>Day 1 Writing ‚Äì Word Order</h1>

<div class="frame">
  <div id="jp"></div>

  <div class="row" id="answerRow"></div>
  <div class="row" id="cardRow"></div>

  <button onclick="checkAnswer()">Check</button>
  <button onclick="shuffleCards()">Shuffle üîÄ</button>
  <button id="nextBtn" onclick="nextQ()">Next ‚ñ∂</button>
  <button id="speakBtn" onclick="speak()">üîä Èü≥Â£∞„ÇíËÅû„Åè</button>
  <button onclick="makePDF()">üìÑ PDF</button>

  <div id="message"></div>
</div>

<canvas id="confetti"></canvas>

<script>
const questions=[
 {jp:"ÁßÅ„ÅÆ‰∏ÄÁï™Â•Ω„Åç„Å™ÁßëÁõÆ„ÅØÊ≠¥Âè≤„Åß„Åô„ÄÇ",en:"My favorite subject is history."},
 {jp:"ËøëÊâÄ„ÅÆÊñ∞„Åó„ÅÑ„Ç§„Çø„É™„Ç¢„É≥„É¨„Çπ„Éà„É©„É≥„Å´ÂÆ∂Êóè„Å®„ÅÑ„Åç„Åæ„Åó„Åü„ÄÇ",en:"I went to a new Italian restaurant in my neighborhood with my family."},
 {jp:"Êó•Êú¨ÊªûÂú®‰∏≠„Å´Áæé„Åó„ÅÑ„ÅäÂØ∫„ÇíË®™„Å≠„Åæ„Åó„Åü„ÄÇ",en:"I visited a beautiful temple during my stay in Japan."},
 {jp:"‰ªäÈÄ±Êú´„ÅØ‰Ωï„Çí„Åô„Çã‰∫àÂÆö„Åß„Åô„ÅãÔºü",en:"What are you going to do this weekend?"},
 {jp:"„Å©„Çì„Å™È£ü„ÅπÁâ©„ÅåÂ•Ω„Åç„Åß„Åô„ÅãÔºü",en:"What kind of food do you like?"},
 {jp:"ÁßÅ„ÅØÂõ≥Êõ∏È§®„ÅßÂãâÂº∑„Åô„Çã„ÅÆ„ÅåÂ•Ω„Åç„Åß„Åô„ÄÇ„Å™„Åú„Å™„ÇâÈùô„Åã„Å†„Åã„Çâ„Åß„Åô„ÄÇ",en:"I like studying in the library because it is quiet."},
 {jp:"„ÅÇ„Å™„Åü„Åå„Éè„Ç§„Ç≠„É≥„Ç∞„Å´Ë°å„Å£„ÅüÊôÇ„ÅÆÂ§©ÂÄô„ÅØ„Å©„ÅÜ„Åß„Åó„Åü„ÅãÔºü",en:"How was the weather when you went hiking?"},
 {jp:"„ÅÇ„Å™„Åü„ÅØ„Åù„ÅÆ„Çπ„Éî„Éº„ÉÅ„Ç≥„É≥„ÉÜ„Çπ„Éà„ÅßÂÑ™Âãù„Åó„Åü„ÅÑ„Åß„Åô„ÅãÔºü",en:"Do you want to win the speech contest?"},
 {jp:"ÁßÅ„ÅÆÂÆ∂„ÅØ„É™„É©„ÉÉ„ÇØ„Çπ„Åô„Çã„ÅÆ„Å´ÊúÄÈÅ©„ÅÆÂ†¥ÊâÄ„Åß„Åô„ÄÇ",en:"My home is the best place to relax."},
 {jp:"„Åù„ÅÆ„Éë„Éº„ÉÜ„Ç£„Éº„Åß„Å®„Å¶„ÇÇÊ•Ω„Åó„ÅÑÊôÇÈñì„ÇíÈÅé„Åî„Åó„Åæ„Åó„Åü„ÄÇ",en:"I had a lot of fun at the party."},
 {jp:"„ÅÇ„Å™„Åü„ÅÆÂºü„ÅØ„Å©„Çì„Å™ÂãïÁâ©„ÅåÂ•Ω„Åç„Åß„Åô„ÅãÔºü",en:"What kind of animals does your brother like?"},
 {jp:"Ë™∞„Å®‰∏ÄÁ∑í„Å´„Åù„ÅÆ„Ç≥„É≥„Çµ„Éº„Éà„Å´Ë°å„Å£„Åü„ÅÆ„Åß„Åô„ÅãÔºü",en:"Who did you go to the concert with?"},
 {jp:"„Åù„ÅÆ„ÉÅ„Ç±„ÉÉ„Éà„ÅØÈ´ò„Åã„Å£„Åü„Åß„Åô„ÅãÔºü",en:"Was the ticket expensive?"},
 {jp:"‰ªäÂπ¥„ÅÆÂ§è‰ºë„Åø„ÅØ„Å©„Åì„Å´„ÅÑ„Åè‰∫àÂÆö„Åß„Åô„ÅãÔºü",en:"Where are you planning to go for your summer vacation?"},
 {jp:"‰ºöË≠∞„Å´Âá∫Â∏≠„Åó„Å™„Åë„Çå„Å∞„Å™„Çä„Åæ„Åõ„Çì„ÅãÔºü",en:"Do I have to attend the meeting?"},
 {jp:"„ÅÇ„Å™„Åü„ÅÆËá™Ëª¢Ëªä„ÇíË≤∏„Åó„Å¶„ÇÇ„Çâ„Å£„Å¶„ÇÇ„ÅÑ„ÅÑ„Åß„Åô„ÅãÔºü",en:"Can you lend me your bike?"}
];

let cur=0;

function wordsOf(i){
  return questions[i].en
    .replace(/([.?])/g," $1")
    .split(" ");
}

function loadQ(){
  message.textContent="";
  nextBtn.style.display="none";
  speakBtn.style.display="none";
  jp.textContent=(cur+1)+") "+questions[cur].jp;
  answerRow.innerHTML="";
  cardRow.innerHTML="";

  shuffle(wordsOf(cur)).forEach(w=>{
    const c=document.createElement("div");
    c.className="card";
    c.textContent=w;
    c.onclick=()=>toggle(c);
    cardRow.appendChild(c);
  });
}

function toggle(card){
  if(card.parentElement.id==="cardRow"){
    answerRow.appendChild(card);
  }else{
    cardRow.appendChild(card);
  }
}

function checkAnswer(){
  const user=[...answerRow.children].map(c=>c.textContent).join(" ");
  const correct=questions[cur].en.replace(/([.?])/g," $1");
  if(user===correct){
    message.textContent="Correct! üéâ";
    nextBtn.style.display="inline-block";
    speakBtn.style.display="inline-block";
  }else{
    message.textContent="Try again ‚ùå";
  }
}

function shuffleCards(){
  // ‰∏ä„Å´„ÅÇ„Çã„Ç´„Éº„Éâ„Çí„Åô„Åπ„Å¶‰∏ã„Å∏Êàª„Åô
  [...answerRow.children].forEach(c=>cardRow.appendChild(c));

  // ÂÖ®„Ç´„Éº„Éâ„Çí„Ç∑„É£„ÉÉ„Éï„É´
  shuffle([...cardRow.children]).forEach(c=>cardRow.appendChild(c));

  // „É°„ÉÉ„Çª„Éº„Ç∏„Å®„Éú„Çø„É≥„Çí„É™„Çª„ÉÉ„Éà
  message.textContent="";
  nextBtn.style.display="none";
  speakBtn.style.display="none";
}

function nextQ(){
  cur++;
  if(cur<questions.length){
    loadQ();
  }else{
    message.textContent="All Done! üéä";
    startConfetti();
  }
}

function shuffle(a){
  return [...a].sort(()=>Math.random()-.5);
}

function speak(){
  const u=new SpeechSynthesisUtterance(questions[cur].en);
  u.lang="en-US";
  u.rate=0.7;
  speechSynthesis.cancel();
  speechSynthesis.speak(u);
}

function startConfetti(){
  const c=confetti,ctx=c.getContext("2d");
  c.width=innerWidth;c.height=innerHeight;
  const p=[...Array(150)].map(()=>({
    x:Math.random()*c.width,
    y:Math.random()*c.height,
    r:Math.random()*6+4,
    dy:Math.random()*3+2
  }));
  const t=Date.now();
  (function draw(){
    ctx.clearRect(0,0,c.width,c.height);
    p.forEach(o=>{
      ctx.beginPath();
      ctx.arc(o.x,o.y,o.r,0,Math.PI*2);
      ctx.fillStyle=`hsl(${Math.random()*360},80%,60%)`;
      ctx.fill();
      o.y+=o.dy;
    });
    Date.now()-t<5000 && requestAnimationFrame(draw);
  })();
}

function makePDF(){
  const w=window.open("");
  w.document.write(`
  <html><head><style>
  body{font-family:"Hiragino Maru Gothic ProN";padding:24px;}
  h2{text-align:center;}
  .q{margin-bottom:28px;page-break-inside:avoid;}
  .words{font-size:13px;margin:6px 0;}
  .line{border-bottom:1px solid #000;height:24px;margin-top:8px;}
  </style></head><body>
  <h2>Day 1 Writing</h2>
  Name: ____________„ÄÄDate: ____________<br><br>
  `);
  questions.forEach((q,i)=>{
    const wds=shuffle(wordsOf(i)).join(" / ");
    w.document.write(`
      <div class="q">
        ${i+1}) ${q.jp}<br>
        <div class="words">${wds}</div>
        <div class="line"></div>
      </div>
    `);
  });
  w.document.write("</body></html>");
  w.document.close();
  w.print();
}

loadQ();
</script>
</body>
</html>

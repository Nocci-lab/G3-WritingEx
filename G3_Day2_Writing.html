<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>Day 2 Writing | Word Order</title>

<style>
body{
  font-family:"Hiragino Maru Gothic ProN","Hiragino Maru Gothic",sans-serif;
  background:#fff9e6;
  padding:20px;
  text-align:center;
  font-size:20px;
}

h1{
  font-size:32px;
  margin-bottom:20px;
}

.frame{
  max-width:900px;
  margin:auto;
  background:#ffffff;
  border:3px solid #f2c94c;
  border-radius:16px;
  padding:24px;
}

#jp{
  font-size:26px;
  font-weight:bold;
  margin-bottom:20px;
}

.row{
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  gap:10px;
  margin:16px 0;
}

#answerRow{
  min-height:80px;
  border:3px dashed #bbb;
  border-radius:12px;
  padding:12px;
}

.card{
  background:#e6f5e6;
  padding:14px 18px;
  border-radius:12px;
  font-size:24px;
  font-weight:bold;
  cursor:pointer;
  user-select:none;
  box-shadow:2px 2px 6px rgba(0,0,0,.2);
}

button{
  padding:12px 24px;
  font-size:20px;
  border-radius:12px;
  margin:6px;
}

#message{
  font-size:24px;
  font-weight:bold;
  height:32px;
  margin-top:10px;
}

#nextBtn,
#speakBtn{
  display:none;
}

canvas{
  position:fixed;
  inset:0;
  pointer-events:none;
}
</style>
</head>

<body>

<h1>Day 2 Writing ‚Äì Word Order</h1>

<div class="frame">
  <div id="jp"></div>

  <div class="row" id="answerRow"></div>
  <div class="row" id="cardRow"></div>

  <button onclick="checkAnswer()">Check</button>
  <button onclick="shuffleCards()">Shuffle üîÄ</button>
  <button id="nextBtn" onclick="nextQ()">Next ‚ñ∂</button>
  <button id="speakBtn" onclick="speak()">üîä Èü≥Â£∞„ÇíËÅû„Åè</button>
  <button onclick="makePDF()">üìÑ PDF</button>

  <div id="message"></div>
</div>

<canvas id="confetti"></canvas>

<script>
const questions=[
{jp:"ÂßâÔºàÂ¶πÔºâ„Å®ÁßÅ„ÅØ‰ªäÈÄ±Êú´„ÄÅÊ≥≥„Åé„Å´Ë°å„Åè‰∫àÂÆö„Åß„Åô„ÄÇ",en:"My sister and I are planning to go swimming this weekend."},
{jp:"ÁßÅ„ÅØÂèãÈÅî„Å®‰ΩìËÇ≤È§®„Åß„Éê„Çπ„Ç±„ÉÉ„Éà„Éú„Éº„É´„Çí„Åô„Çã„ÅÆ„ÇíÊ•Ω„Åó„Çì„Åß„ÅÑ„Åæ„Åô„ÄÇ",en:"I enjoy playing basketball with my friends at the gym."},
{jp:"ÁßÅ„ÅØ„ÉÜ„É¨„Éì„ÇíË¶ã„Çã„ÅÆ„ÅåÂ•Ω„Åç„Åß„ÄÅÁâπ„Å´Èü≥Ê•ΩÁï™ÁµÑ„ÅåÂ•Ω„Åç„Åß„Åô„ÄÇ",en:"I like to watch TV, especially music shows."},
{jp:"ÁßÅ„ÅØ‰∏ÄÂ∫¶„ÇÇÊµ∑„Å´Ë°å„Å£„Åü„Åì„Å®„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ",en:"I have never been to the beach."},
{jp:"ÁßÅ„ÅØÁæéË°ìÈ§®„Å´Ë°å„Åè„ÅÆ„ÅåÂ•Ω„Åç„Åß„Åô„ÄÇ„Å™„Åú„Å™„Çâ„ÄÅ„Åù„Åì„Åß„Åü„Åè„Åï„Çì„ÅÆÁæé„Åó„ÅÑÁµµ„ÇíË¶ã„Çã„Åì„Å®„Åå„Åß„Åç„Çã„Åã„Çâ„Åß„Åô„ÄÇ",en:"I enjoy going to the museum because I can see many beautiful paintings there."},
{jp:"ÁßÅ„ÅØÊØéÂπ¥„ÄÅÂ§è‰ºë„Åø„ÅÆÈñì„Å´ÂÆ∂„ÅÆËøë„Åè„ÅÆÂ§èÁ•≠„Çä„Å´Ë°å„Åç„Åæ„Åô„ÄÇ",en:"I go to summer festivals near my house during summer vacation every year."},
{jp:"„É¨„Éù„Éº„Éà„ÇíÁµÇ„Çè„Çâ„Åõ„ÇãÂøÖË¶Å„Åå„ÅÇ„Çã„ÅÆ„Åß„ÄÅ‰ªäÊó•„ÅØÂÆ∂„Å´„ÅÑ„Åæ„Åô„ÄÇ",en:"I will stay home today because I need to finish my report."},
{jp:"ÁßÅ„ÅØÊ≠å„ÅÆ„Ç≥„É≥„ÉÜ„Çπ„Éà„Å´ÂèÇÂä†„Åó„Å¶Ë≥û„ÇíÂèñ„Çä„Åü„ÅÑ„Åß„Åô„ÄÇ",en:"I want to join the singing contest and win a prize."},
{jp:"Áà∂„ÅØÂπ≥Êó•„ÄÅ„Å†„ÅÑ„Åü„ÅÑ7ÊôÇ„Åî„Çç„Å´‰ºöÁ§æ„ÇíÂá∫„Åæ„Åô„ÄÇ",en:"My father leaves his office around seven o‚Äôclock on weekdays."},
{jp:"‰ºë„ÅøÊôÇÈñì„Å´ÊôÇÈñì„Çí„Å§„Å∂„Åô„Åü„ÇÅ„Å´„ÄÅÂèãÈÅî„Å®„Éà„É©„É≥„Éó„Çí„Åó„Åæ„Åó„Åü„ÄÇ",en:"My friend and I played a card game during the break to kill time."},
{jp:"Êñ∞„Åó„ÅÑÊúç„ÇíË≤∑„ÅÜ„Åü„ÇÅ„Å´„ÄÅÂßâÔºàÂ¶πÔºâ„Å®„Éá„Éë„Éº„Éà„Å´Ë°å„Åè„Å§„ÇÇ„Çä„Åß„Åô„ÄÇ",en:"I am going to go to the department store with my sister to buy some new clothes."},
{jp:"Á•ñÁà∂„ÅØÂÅ•Â∫∑„Å´ÂïèÈ°å„Åå„ÅÇ„Çã„ÅÆ„Åß„ÄÅÊúù„Å´Êï£Ê≠©„Çí„Åó„ÄÅÂÅ•Â∫∑ÁöÑ„Å™È£ü‰∫ã„Çí„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ",en:"My grandfather has health problems, so he takes a walk in the morning and eats healthy food."},
{jp:"ÁßÅ„ÅØÊµ∑Â§ñ„ÅÆÂ§ßÂ≠¶„Å´ÈÄ≤Â≠¶„Åô„Çã‰∫àÂÆö„Å™„ÅÆ„Åß„ÄÅ„ÇÇ„Å£„Å®Ëã±Ë™û„ÇíÂãâÂº∑„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ",en:"I am planning to study at a college abroad, so I need to study English harder."},
{jp:"„Åù„ÅÆ„Ç§„Çø„É™„Ç¢„É≥„É¨„Çπ„Éà„É©„É≥„ÅØ1Èöé„Å´„ÅÇ„Çä„Åæ„Åó„Åü„Åå„ÄÅÁßÅ„ÅØÈñìÈÅï„Åà„Å¶2Èöé„Å´Ë°å„Å£„Å¶„Åó„Åæ„ÅÑ„Åæ„Åó„Åü„ÄÇ",en:"The Italian restaurant was on the first floor, but I mistakenly went to the second floor."},
{jp:"ÁßÅ„ÅØËá™ÁÑ∂„Å´„Å§„ÅÑ„Å¶Â≠¶„Å∂„ÅÆ„ÅåÂ•Ω„Åç„Å™„ÅÆ„Åß„ÄÅÂ•Ω„Åç„Å™ÊïôÁßë„ÅØÁêÜÁßë„Åß„Åô„ÄÇ",en:"I like learning about nature, so my favorite subject is science."},
{jp:"È¢®ÈÇ™„Çí„Å≤„Åç„Åü„Åè„Å™„Åã„Å£„Åü„ÅÆ„Åß„ÄÅ„Åù„ÅÆÊó•„ÅØ„Ç≥„Éº„Éà„ÇíÁùÄ„Åæ„Åó„Åü„ÄÇ",en:"I didn‚Äôt want to catch a cold, so I wore a coat that day."}
];

let cur=0;

/* ‚≠ê „Ç´„É≥„Éû„Éª„Éî„É™„Ç™„Éâ„ÇíÂçòË™ûÊâ±„ÅÑ */
function wordsOf(i){
  return questions[i].en
    .replace(/([.,?])/g," $1 ")
    .trim()
    .split(/\s+/);
}

function loadQ(){
  message.textContent="";
  nextBtn.style.display="none";
  speakBtn.style.display="none";
  jp.textContent=(cur+1)+") "+questions[cur].jp;
  answerRow.innerHTML="";
  cardRow.innerHTML="";

  shuffle(wordsOf(cur)).forEach(w=>{
    const c=document.createElement("div");
    c.className="card";
    c.textContent=w;
    c.onclick=()=>toggle(c);
    cardRow.appendChild(c);
  });
}

function toggle(card){
  if(card.parentElement.id==="cardRow"){
    answerRow.appendChild(card);
  }else{
    cardRow.appendChild(card);
  }
}

/* ‚≠ê „Çπ„Éö„Éº„ÇπÂÆåÂÖ®‰∏ÄËá¥‰øÆÊ≠£Áâà */
function checkAnswer(){
  const user=[...answerRow.children]
    .map(c=>c.textContent)
    .join(" ")
    .replace(/\s+/g," ")
    .trim();

  const correct=wordsOf(cur).join(" ");

  if(user===correct){
    message.textContent="Correct! üéâ";
    nextBtn.style.display="inline-block";
    speakBtn.style.display="inline-block";
  }else{
    message.textContent="Try again ‚ùå";
  }
}

function shuffleCards(){
  [...answerRow.children].forEach(c=>cardRow.appendChild(c));
  shuffle([...cardRow.children]).forEach(c=>cardRow.appendChild(c));
  message.textContent="";
  nextBtn.style.display="none";
  speakBtn.style.display="none";
}

function nextQ(){
  cur++;
  if(cur<questions.length){
    loadQ();
  }else{
    message.textContent="All Done! üéä";
    startConfetti();
  }
}

function shuffle(a){
  return [...a].sort(()=>Math.random()-.5);
}

function speak(){
  const u=new SpeechSynthesisUtterance(questions[cur].en);
  u.lang="en-US";
  u.rate=0.7;
  speechSynthesis.cancel();
  speechSynthesis.speak(u);
}

loadQ();

function makePDF(){
  const w=window.open("");
  w.document.write(`
  <html><head><style>
  body{font-family:"Hiragino Maru Gothic ProN";padding:24px;}
  h2{text-align:center;margin-bottom:20px;}
  .q{margin-bottom:28px;page-break-inside:avoid;}
  .words{font-size:13px;margin:6px 0;}
  .line{border-bottom:1px solid #000;height:24px;margin-top:8px;}
  .answer{margin-bottom:10px;}
  .page-break{page-break-before:always;}
  </style></head><body>
  <h2>Day 2 Writing</h2>
  Name: ____________„ÄÄDate: ____________<br><br>
  `);

  /* ‚≠ê ÂïèÈ°å„Éö„Éº„Ç∏ */
  questions.forEach((q,i)=>{
    const wds=shuffle(wordsOf(i)).join(" / ");
    w.document.write(`
      <div class="q">
        ${i+1}) ${q.jp}<br>
        <div class="words">${wds}</div>
        <div class="line"></div>
      </div>
    `);
  });

  /* ‚≠ê Êîπ„Éö„Éº„Ç∏ */
  w.document.write(`
    <div class="page-break"></div>
    <h2>Answer</h2>
  `);

  /* ‚≠ê Á≠î„Åà„Éö„Éº„Ç∏ */
  questions.forEach((q,i)=>{
    w.document.write(`
      <div class="answer">
        ${i+1}) ${q.en}
      </div>
    `);
  });

  w.document.write("</body></html>");
  w.document.close();
  w.print();
}




</script>
</body>
</html>
